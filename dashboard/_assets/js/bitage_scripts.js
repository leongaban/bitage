/**
 * State-based routing for AngularJS
 * @version v0.2.13
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(e,t,n){"use strict";function r(e,t){return B(new(B(function(){},{prototype:e})),t)}function i(e){return T(arguments,function(t){t!==e&&T(t,function(t,n){e.hasOwnProperty(n)||(e[n]=t)})}),e}function o(e,t){var n=[];for(var r in e.path){if(e.path[r]!==t.path[r])break;n.push(e.path[r])}return n}function a(e){if(Object.keys)return Object.keys(e);var n=[];return t.forEach(e,function(e,t){n.push(t)}),n}function s(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var n=e.length>>>0,r=Number(arguments[2])||0;for(r=0>r?Math.ceil(r):Math.floor(r),0>r&&(r+=n);n>r;r++)if(r in e&&e[r]===t)return r;return-1}function u(e,t,n,r){var i=o(n,r),u,l={},c=[];for(var f in i)if(i[f].params&&(u=a(i[f].params),u.length))for(var h in u)s(c,u[h])>=0||(c.push(u[h]),l[u[h]]=e[u[h]]);return B({},l,t)}function l(e,t,n){if(!n){n=[];for(var r in e)n.push(r)}for(var i=0;i<n.length;i++){var o=n[i];if(e[o]!=t[o])return!1}return!0}function c(e,t){var n={};return T(e,function(e){n[e]=t[e]}),n}function f(e,t){var n={};return T(e,function(e){n[e[t]]=e}),n}function h(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t}function d(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var r in e)-1==s(n,r)&&(t[r]=e[r]);return t}function p(e,t){var n=N(e)?[]:{};return T(e,function(e,r){n[r]=z(t)?t(e):e[t]}),n}function v(e,t){var n=N(e),r=n?[]:{};return T(e,function(e,i){t(e,i)&&(r[n?r.length:i]=e)}),r}function m(e,t){var n=N(e)?[]:{};return T(e,function(e,r){n[r]=t(e,r)}),n}function g(e,t){var r=1,o=2,u={},l=[],c=u,f=B(e.when(u),{$$promises:u,$$values:u});this.study=function(u){function h(e,n){if(w[n]!==o){if(g.push(n),w[n]===r)throw g.splice(0,s(g,n)),new Error("Cyclic dependency: "+g.join(" -> "));if(w[n]=r,D(e))m.push(n,[function(){return t.get(e)}],l);else{var i=t.annotate(e);T(i,function(e){e!==n&&u.hasOwnProperty(e)&&h(u[e],e)}),m.push(n,e,i)}g.pop(),w[n]=o}}function p(e){return U(e)&&e.then&&e.$$promises}if(!U(u))throw new Error("'invocables' must be an object");var v=a(u||{}),m=[],g=[],w={};return T(u,h),u=g=w=null,function(r,o,a){function s(){--y||(S||i(b,o.$$values),g.$$values=b,g.$$promises=g.$$promises||!0,delete g.$$inheritedValues,h.resolve(b))}function u(e){g.$$failure=e,h.reject(e)}function l(n,i,o){function l(e){f.reject(e),u(e)}function c(){if(!R(g.$$failure))try{f.resolve(t.invoke(i,a,b)),f.promise.then(function(e){b[n]=e,s()},l)}catch(e){l(e)}}var f=e.defer(),h=0;T(o,function(e){w.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(h++,w[e].then(function(t){b[e]=t,--h||c()},l))}),h||c(),w[n]=f.promise}if(p(r)&&a===n&&(a=o,o=r,r=null),r){if(!U(r))throw new Error("'locals' must be an object")}else r=c;if(o){if(!p(o))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else o=f;var h=e.defer(),g=h.promise,w=g.$$promises={},b=B({},r),y=1+m.length/3,S=!1;if(R(o.$$failure))return u(o.$$failure),g;o.$$inheritedValues&&i(b,d(o.$$inheritedValues,v)),B(w,o.$$promises),o.$$values?(S=i(b,d(o.$$values,v)),g.$$inheritedValues=d(o.$$values,v),s()):(o.$$inheritedValues&&(g.$$inheritedValues=d(o.$$inheritedValues,v)),o.then(s,u));for(var k=0,P=m.length;P>k;k+=3)r.hasOwnProperty(m[k])?s():l(m[k],m[k+1],m[k+2]);return g}},this.resolve=function(e,t,n,r){return this.study(e)(t,n,r)}}function w(e,t,n){this.fromConfig=function(e,t,n){return R(e.template)?this.fromString(e.template,t):R(e.templateUrl)?this.fromUrl(e.templateUrl,t):R(e.templateProvider)?this.fromProvider(e.templateProvider,t,n):null},this.fromString=function(e,t){return z(e)?e(t):e},this.fromUrl=function(n,r){return z(n)&&(n=n(r)),null==n?null:e.get(n,{cache:t,headers:{Accept:"text/html"}}).then(function(e){return e.data})},this.fromProvider=function(e,t,r){return n.invoke(e,null,r||{params:t})}}function b(e,t,i){function o(t,n,r,i){if(m.push(t),p[t])return p[t];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+e+"'");if(v[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+e+"'");return v[t]=new V.Param(t,n,r,i),v[t]}function a(e,t,n){var r=["",""],i=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return i;switch(n){case!1:r=["(",")"];break;case!0:r=["?(",")?"];break;default:r=["("+n+"|",")?"]}return i+r[0]+t+r[1]}function s(n,i){var o,a,s,u,l,c;return o=n[2]||n[3],l=t.params[o],s=e.substring(f,n.index),a=i?n[4]:n[4]||("*"==n[1]?".*":null),u=V.type(a||"string")||r(V.type("string"),{pattern:new RegExp(a)}),{id:o,regexp:a,segment:s,type:u,cfg:l}}t=B({params:{}},U(t)?t:{});var u=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,c="^",f=0,h,d=this.segments=[],p=i?i.params:{},v=this.params=i?i.params.$$new():new V.ParamSet,m=[];this.source=e;for(var g,w,b;(h=u.exec(e))&&(g=s(h,!1),!(g.segment.indexOf("?")>=0));)w=o(g.id,g.type,g.cfg,"path"),c+=a(g.segment,w.type.pattern.source,w.squash),d.push(g.segment),f=u.lastIndex;b=e.substring(f);var y=b.indexOf("?");if(y>=0){var S=this.sourceSearch=b.substring(y);if(b=b.substring(0,y),this.sourcePath=e.substring(0,f+y),S.length>0)for(f=0;h=l.exec(S);)g=s(h,!0),w=o(g.id,g.type,g.cfg,"search"),f=u.lastIndex}else this.sourcePath=e,this.sourceSearch="";c+=a(b)+(t.strict===!1?"/?":"")+"$",d.push(b),this.regexp=new RegExp(c,t.caseInsensitive?"i":n),this.prefix=d[0],this.$$paramNames=m}function y(e){B(this,e)}function S(){function e(e){return null!=e?e.toString().replace(/\//g,"%2F"):e}function i(e){return null!=e?e.toString().replace(/%2F/g,"/"):e}function o(e){return this.pattern.test(e)}function u(){return{strict:d,caseInsensitive:h}}function l(e){return z(e)||N(e)&&z(e[e.length-1])}function c(){for(;k.length;){var e=k.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");t.extend(g[e.name],P.invoke(e.def))}}function f(e){B(this,e||{})}V=this;var h=!1,d=!0,p=!1,g={},w=!0,k=[],P,E={string:{encode:e,decode:i,is:o,pattern:/[^/]*/},"int":{encode:e,decode:function(e){return parseInt(e,10)},is:function(e){return R(e)&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return e===!0||e===!1},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):n},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):n},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:t.toJson,decode:t.fromJson,is:t.isObject,equals:t.equals,pattern:/[^/]*/},any:{encode:t.identity,decode:t.identity,is:t.identity,equals:t.equals,pattern:/.*/}};S.$$getDefaultValue=function(e){if(!l(e.value))return e.value;if(!P)throw new Error("Injectable functions cannot be called at configuration time");return P.invoke(e.value)},this.caseInsensitive=function(e){return R(e)&&(h=e),h},this.strictMode=function(e){return R(e)&&(d=e),d},this.defaultSquashPolicy=function(e){if(!R(e))return p;if(e!==!0&&e!==!1&&!D(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return p=e,e},this.compile=function(e,t){return new b(e,B(u(),t))},this.isMatcher=function(e){if(!U(e))return!1;var t=!0;return T(b.prototype,function(n,r){z(n)&&(t=t&&R(e[r])&&z(e[r]))}),t},this.type=function(e,t,n){if(!R(t))return g[e];if(g.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return g[e]=new y(B({name:e},t)),n&&(k.push({name:e,def:n}),w||c()),this},T(E,function(e,t){g[t]=new y(B({name:t},e))}),g=r(g,{}),this.$get=["$injector",function(e){return P=e,w=!1,c(),T(E,function(e,t){g[t]||(g[t]=new y(e))}),this}],this.Param=function x(e,t,r,i){function o(e){var t=U(e)?a(e):[],n=-1===s(t,"value")&&-1===s(t,"type")&&-1===s(t,"squash")&&-1===s(t,"array");return n&&(e={value:e}),e.$$fn=l(e.value)?e.value:function(){return e.value},e}function u(t,n,r){if(t.type&&n)throw new Error("Param '"+e+"' has two type configurations.");return n?n:t.type?t.type instanceof y?t.type:new y(t.type):"config"===r?g.any:g.string}function c(){var t={array:"search"===i?"auto":!1},n=e.match(/\[\]$/)?{array:!0}:{};return B(t,n,r).array}function f(e,t){var n=e.squash;if(!t||n===!1)return!1;if(!R(n)||null==n)return p;if(n===!0||D(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}function h(e,t,r,i){var o,a,u=[{from:"",to:r||t?n:""},{from:null,to:r||t?n:""}];return o=N(e.replace)?e.replace:[],D(i)&&o.push({from:i,to:n}),a=m(o,function(e){return e.from}),v(u,function(e){return-1===s(a,e.from)}).concat(o)}function d(){if(!P)throw new Error("Injectable functions cannot be called at configuration time");return P.invoke(r.$$fn)}function w(e){function t(e){return function(t){return t.from===e}}function n(e){var n=m(v(S.replace,t(e)),function(e){return e.to});return n.length?n[0]:e}return e=n(e),R(e)?S.type.decode(e):d()}function b(){return"{Param:"+e+" "+t+" squash: '"+x+"' optional: "+E+"}"}var S=this;r=o(r),t=u(r,t,i);var k=c();t=k?t.$asArray(k,"search"===i):t,"string"!==t.name||k||"path"!==i||r.value!==n||(r.value="");var E=r.value!==n,x=f(r,E),j=h(r,k,E,x);B(this,{id:e,type:t,location:i,array:k,squash:x,replace:j,isOptional:E,value:w,dynamic:n,config:r,toString:b})},f.prototype={$$new:function(){return r(this,B(new f,{$$parent:this}))},$$keys:function(){for(var e=[],t=[],n=this,r=a(f.prototype);n;)t.push(n),n=n.$$parent;return t.reverse(),T(t,function(t){T(a(t),function(t){-1===s(e,t)&&-1===s(r,t)&&e.push(t)})}),e},$$values:function(e){var t={},n=this;return T(n.$$keys(),function(r){t[r]=n[r].value(e&&e[r])}),t},$$equals:function(e,t){var n=!0,r=this;return T(r.$$keys(),function(i){var o=e&&e[i],a=t&&t[i];r[i].type.equals(o,a)||(n=!1)}),n},$$validates:function j(e){var t=!0,n,r,i,o=this;return T(this.$$keys(),function(a){i=o[a],r=e[a],n=!r&&i.isOptional,t=t&&(n||!!i.type.is(r))}),t},$$parent:n},this.ParamSet=f}function k(e,r){function i(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return null!=t?t[1].replace(/\\(.)/g,"$1"):""}function o(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,n){return t["$"===n?0:Number(n)]})}function a(e,t,n){if(!n)return!1;var r=e.invoke(t,t,{$match:n});return R(r)?r:!0}function s(r,i,o,a){function s(e,t,n){return"/"===p?e:t?p.slice(0,-1)+e:n?p.slice(1)+e:e}function h(e){function t(e){var t=e(o,r);return t?(D(t)&&r.replace().url(t),!0):!1}if(!e||!e.defaultPrevented){var i=m&&r.url()===m;if(m=n,i)return!0;var a=u.length,s;for(s=0;a>s;s++)if(t(u[s]))return;l&&t(l)}}function d(){return f=f||i.$on("$locationChangeSuccess",h)}var p=a.baseHref(),v=r.url(),m;return c||d(),{sync:function(){h()},listen:function(){return d()},update:function(e){return e?void(v=r.url()):void(r.url()!==v&&(r.url(v),r.replace()))},push:function(e,t,i){r.url(e.format(t||{})),m=i&&i.$$avoidResync?r.url():n,i&&i.replace&&r.replace()},href:function(n,i,o){if(!n.validates(i))return null;var a=e.html5Mode();t.isObject(a)&&(a=a.enabled);var u=n.format(i);if(o=o||{},a||null===u||(u="#"+e.hashPrefix()+u),u=s(u,a,o.absolute),!o.absolute||!u)return u;var l=!a&&u?"/":"",c=r.port();return c=80===c||443===c?"":":"+c,[r.protocol(),"://",r.host(),c,l,u].join("")}}}var u=[],l=null,c=!1,f;this.rule=function(e){if(!z(e))throw new Error("'rule' must be a function");return u.push(e),this},this.otherwise=function(e){if(D(e)){var t=e;e=function(){return t}}else if(!z(e))throw new Error("'rule' must be a function");return l=e,this},this.when=function(e,t){var n,s=D(t);if(D(e)&&(e=r.compile(e)),!s&&!z(t)&&!N(t))throw new Error("invalid 'handler' in when()");var u={matcher:function(e,t){return s&&(n=r.compile(t),t=["$match",function(e){return n.format(e)}]),B(function(n,r){return a(n,t,e.exec(r.path(),r.search()))},{prefix:D(e.prefix)?e.prefix:""})},regex:function(e,t){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");return s&&(n=t,t=["$match",function(e){return o(n,e)}]),B(function(n,r){return a(n,t,e.exec(r.path()))},{prefix:i(e)})}},l={matcher:r.isMatcher(e),regex:e instanceof RegExp};for(var c in l)if(l[c])return this.rule(u[c](e,t));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){e===n&&(e=!0),c=e},this.$get=s,s.$inject=["$location","$rootScope","$injector","$browser"]}function P(e,i){function o(e){return 0===e.indexOf(".")||0===e.indexOf("^")}function f(e,t){if(!e)return n;var r=D(e),i=r?e:e.name,a=o(i);if(a){if(!t)throw new Error("No reference point given for path '"+i+"'");t=f(t);for(var s=i.split("."),u=0,l=s.length,c=t;l>u;u++)if(""!==s[u]||0!==u){if("^"!==s[u])break;if(!c.parent)throw new Error("Path '"+i+"' not valid for state '"+t.name+"'");c=c.parent}else c=t;s=s.slice(u).join("."),i=c.name+(c.name&&s?".":"")+s}var h=P[i];return!h||!r&&(r||h!==e&&h.self!==e)?n:h}function h(e,t){x[e]||(x[e]=[]),x[e].push(t)}function d(e){for(var t=x[e]||[];t.length;)p(t.shift())}function p(t){t=r(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}});var n=t.name;if(!D(n)||n.indexOf("@")>=0)throw new Error("State must have a valid name");if(P.hasOwnProperty(n))throw new Error("State '"+n+"'' is already defined");var i=-1!==n.indexOf(".")?n.substring(0,n.lastIndexOf(".")):D(t.parent)?t.parent:U(t.parent)&&D(t.parent.name)?t.parent.name:"";if(i&&!P[i])return h(i,t.self);for(var o in _)z(_[o])&&(t[o]=_[o](t,_.$delegates[o]));return P[n]=t,!t[j]&&t.url&&e.when(t.url,["$match","$stateParams",function(e,n){E.$current.navigable==t&&l(e,n)||E.transitionTo(t,e,{inherit:!0,location:!1})}]),d(n),t}function v(e){return e.indexOf("*")>-1}function g(e){var t=e.split("."),n=E.$current.name.split(".");if("**"===t[0]&&(n=n.slice(s(n,t[1])),n.unshift("**")),"**"===t[t.length-1]&&(n.splice(s(n,t[t.length-2])+1,Number.MAX_VALUE),n.push("**")),t.length!=n.length)return!1;for(var r=0,i=t.length;i>r;r++)"*"===t[r]&&(n[r]="*");return n.join("")===t.join("")}function w(e,t){return D(e)&&!R(t)?_[e]:z(t)&&D(e)?(_[e]&&!_.$delegates[e]&&(_.$delegates[e]=_[e]),_[e]=t,this):this}function b(e,t){return U(e)?t=e:t.name=e,p(t),this}function y(e,i,o,s,h,d,p,w,b){function y(t,n,r,o){var a=e.$broadcast("$stateNotFound",t,n,r);if(a.defaultPrevented)return p.update(),C;if(!a.retry)return null;if(o.$retry)return p.update(),A;var s=E.transition=i.when(a.retry);return s.then(function(){return s!==E.transition?_:(t.options.$retry=!0,E.transitionTo(t.to,t.toParams,t.options))},function(){return C}),p.update(),s}function x(e,n,r,a,u,l){var f=r?n:c(e.params.$$keys(),n),d={$stateParams:f};u.resolve=h.resolve(e.resolve,d,u.resolve,e);var p=[u.resolve.then(function(e){u.globals=e})];return a&&p.push(a),T(e.views,function(n,r){var i=n.resolve&&n.resolve!==e.resolve?n.resolve:{};i.$template=[function(){return o.load(r,{view:n,locals:d,params:f,notify:l.notify})||""}],p.push(h.resolve(i,d,u.resolve,e).then(function(o){if(z(n.controllerProvider)||N(n.controllerProvider)){var a=t.extend({},i,d);o.$$controller=s.invoke(n.controllerProvider,null,a)}else o.$$controller=n.controller;o.$$state=e,o.$$controllerAs=n.controllerAs,u[r]=o}))}),i.all(p).then(function(e){return u})}var _=i.reject(new Error("transition superseded")),O=i.reject(new Error("transition prevented")),C=i.reject(new Error("transition aborted")),A=i.reject(new Error("transition failed"));return k.locals={resolve:null,globals:{$stateParams:{}}},E={params:{},current:k.self,$current:k,transition:null},E.reload=function q(){return E.transitionTo(E.current,d,{reload:!0,inherit:!1,notify:!0})},E.go=function I(e,t,n){return E.transitionTo(e,t,B({inherit:!0,relative:E.$current},n))},E.transitionTo=function F(t,n,o){n=n||{},o=B({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},o||{});var a=E.$current,l=E.params,h=a.path,v,m=f(t,o.relative);if(!R(m)){var g={to:t,toParams:n,options:o},w=y(g,a.self,l,o);if(w)return w;if(t=g.to,n=g.toParams,o=g.options,m=f(t,o.relative),!R(m)){if(!o.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+o.relative+"'")}}if(m[j])throw new Error("Cannot transition to abstract state '"+t+"'");if(o.inherit&&(n=u(d,n||{},E.$current,m)),!m.params.$$validates(n))return A;n=m.params.$$values(n),t=m;var b=t.path,P=0,C=b[P],q=k.locals,I=[];if(!o.reload)for(;C&&C===h[P]&&C.ownParams.$$equals(n,l);)q=I[P]=C.locals,P++,C=b[P];if(S(t,a,q,o))return t.self.reloadOnSearch!==!1&&p.update(),E.transition=null,i.when(E.current);if(n=c(t.params.$$keys(),n||{}),o.notify&&e.$broadcast("$stateChangeStart",t.self,n,a.self,l).defaultPrevented)return p.update(),O;for(var F=i.when(q),M=P;M<b.length;M++,C=b[M])q=I[M]=r(q),F=x(C,n,C===t,F,q,o);var z=E.transition=F.then(function(){var r,i,u;if(E.transition!==z)return _;for(r=h.length-1;r>=P;r--)u=h[r],u.self.onExit&&s.invoke(u.self.onExit,u.self,u.locals.globals),u.locals=null;for(r=P;r<b.length;r++)i=b[r],i.locals=I[r],i.self.onEnter&&s.invoke(i.self.onEnter,i.self,i.locals.globals);return E.transition!==z?_:(E.$current=t,E.current=t.self,E.params=n,L(E.params,d),E.transition=null,o.location&&t.navigable&&p.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===o.location}),o.notify&&e.$broadcast("$stateChangeSuccess",t.self,n,a.self,l),p.update(!0),E.current)},function(r){return E.transition!==z?_:(E.transition=null,v=e.$broadcast("$stateChangeError",t.self,n,a.self,l,r),v.defaultPrevented||p.update(),i.reject(r))});return z},E.is=function M(e,t,r){r=B({relative:E.$current},r||{});var i=f(e,r.relative);return R(i)?E.$current!==i?!1:t?l(i.params.$$values(t),d):!0:n},E.includes=function U(e,t,r){if(r=B({relative:E.$current},r||{}),D(e)&&v(e)){if(!g(e))return!1;e=E.$current.name}var i=f(e,r.relative);return R(i)?R(E.$current.includes[i.name])?t?l(i.params.$$values(t),d,a(t)):!0:!1:n},E.href=function V(e,t,r){r=B({lossy:!0,inherit:!0,absolute:!1,relative:E.$current},r||{});var i=f(e,r.relative);if(!R(i))return null;r.inherit&&(t=u(d,t||{},E.$current,i));var o=i&&r.lossy?i.navigable:i;return o&&o.url!==n&&null!==o.url?p.href(o.url,c(i.params.$$keys(),t||{}),{absolute:r.absolute}):null},E.get=function(e,t){if(0===arguments.length)return m(a(P),function(e){return P[e].self});var n=f(e,t||E.$current);return n&&n.self?n.self:null},E}function S(e,t,n,r){return e!==t||(n!==t.locals||r.reload)&&e.self.reloadOnSearch!==!1?void 0:!0}var k,P={},E,x={},j="abstract",_={parent:function(e){if(R(e.parent)&&e.parent)return f(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?f(t[1]):k},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=B({},e.parent.data,e.data)),e.data},url:function(e){var t=e.url,n={params:e.params||{}};if(D(t))return"^"==t.charAt(0)?i.compile(t.substring(1),n):(e.parent.navigable||k).url.concat(t,n);if(!t||i.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var t=e.url&&e.url.params||new V.ParamSet;return T(e.params||{},function(e,n){t[n]||(t[n]=new V.Param(n,null,e,"config"))}),t},params:function(e){return e.parent&&e.parent.params?B(e.parent.params.$$new(),e.ownParams):new V.ParamSet},views:function(e){var t={};return T(R(e.views)?e.views:{"":e},function(n,r){r.indexOf("@")<0&&(r+="@"+e.parent.name),t[r]=n}),t},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?B({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};k=p({name:"",url:"^",views:null,"abstract":!0}),k.navigable=null,this.decorator=w,this.state=b,this.$get=y,y.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function E(){function e(e,t){return{load:function n(r,i){var o,a={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return i=B(a,i),i.view&&(o=t.fromConfig(i.view,i.params,i.locals)),o&&i.notify&&e.$broadcast("$viewContentLoading",i),o}}}this.$get=e,e.$inject=["$rootScope","$templateFactory"]}function x(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,n){return e?t:function(e){n(function(){e[0].scrollIntoView()},0,!1)}}]}function j(e,n,r,i){function o(){return n.has?function(e){return n.has(e)?n.get(e):null}:function(e){try{return n.get(e)}catch(t){return null}}}function a(e,t){var n=function(){return{enter:function(e,t,n){t.after(e),n()},leave:function(e,t){e.remove(),t()}}};if(l)return{enter:function(e,t,n){var r=l.enter(e,null,t,n);r&&r.then&&r.then(n)},leave:function(e,t){var n=l.leave(e,t);n&&n.then&&n.then(t)}};if(u){var r=u&&u(t,e);return{enter:function(e,t,n){r.enter(e,null,t),n()},leave:function(e,t){r.leave(e),t()}}}return n()}var s=o(),u=s("$animator"),l=s("$animate"),c={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(n,o,s){return function(n,o,u){function l(){f&&(f.remove(),f=null),d&&(d.$destroy(),d=null),h&&(g.leave(h,function(){f=null}),f=h,h=null)}function c(a){var c,f=O(n,u,o,i),w=f&&e.$current&&e.$current.locals[f];if(a||w!==p){c=n.$new(),p=e.$current.locals[f];var b=s(c,function(e){g.enter(e,o,function i(){d&&d.$emit("$viewContentAnimationEnded"),(t.isDefined(m)&&!m||n.$eval(m))&&r(e)}),l()});h=b,d=c,d.$emit("$viewContentLoaded"),d.$eval(v)}}var f,h,d,p,v=u.onload||"",m=u.autoscroll,g=a(u,n);n.$on("$stateChangeSuccess",function(){c(!1)}),n.$on("$viewContentLoading",function(){c(!1)}),c(!0)}}};return c}function _(e,t,n,r){return{restrict:"ECA",priority:-400,compile:function(i){var o=i.html();return function(i,a,s){var u=n.$current,l=O(i,s,a,r),c=u&&u.locals[l];if(c){a.data("$uiView",{name:l,state:c.$$state}),a.html(c.$template?c.$template:o);var f=e(a.contents());if(c.$$controller){c.$scope=i;var h=t(c.$$controller,c);c.$$controllerAs&&(i[c.$$controllerAs]=h),a.data("$ngControllerController",h),a.children().data("$ngControllerController",h)}f(i)}}}}}function O(e,t,n,r){var i=r(t.uiView||t.name||"")(e),o=n.inheritedData("$uiView");return i.indexOf("@")>=0?i:i+"@"+(o?o.state.name:"")}function C(e,t){var n=e.match(/^\s*({[^}]*})\s*$/),r;if(n&&(e=t+"("+n[1]+")"),r=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!r||4!==r.length)throw new Error("Invalid state ref '"+e+"'");return{state:r[1],paramExpr:r[3]||null}}function A(e){var t=e.parent().inheritedData("$uiView");return t&&t.state&&t.state.name?t.state:void 0}function q(e,n){var r=["location","inherit","reload"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,o,a,s){var u=C(a.uiSref,e.current.name),l=null,c=null,f=A(o)||e.$current,h=null,d="A"===o.prop("tagName"),p="FORM"===o[0].nodeName,v=p?"action":"href",m=!0,g={relative:f,inherit:!0},w=i.$eval(a.uiSrefOpts)||{};t.forEach(r,function(e){e in w&&(g[e]=w[e])});var b=function(n){if(n&&(l=t.copy(n)),m){h=e.href(u.state,l,g);var r=s[1]||s[0];return r&&r.$$setStateInfo(u.state,l),null===h?(m=!1,!1):void a.$set(v,h)}};u.paramExpr&&(i.$watch(u.paramExpr,function(e,t){e!==l&&b(e)},!0),l=t.copy(i.$eval(u.paramExpr))),b(),p||o.bind("click",function(t){var r=t.which||t.button;if(!(r>1||t.ctrlKey||t.metaKey||t.shiftKey||o.attr("target"))){var i=n(function(){e.go(u.state,l,g)});t.preventDefault();var a=d&&!h?1:0;t.preventDefault=function(){a--<=0&&n.cancel(i)}}})}}}function I(e,t,n){return{restrict:"A",controller:["$scope","$element","$attrs",function(t,r,i){function o(){a()?r.addClass(l):r.removeClass(l)}function a(){return"undefined"!=typeof i.uiSrefActiveEq?s&&e.is(s.name,u):s&&e.includes(s.name,u)}var s,u,l;l=n(i.uiSrefActiveEq||i.uiSrefActive||"",!1)(t),this.$$setStateInfo=function(t,n){s=e.get(t,A(r)),u=n,o()},t.$on("$stateChangeSuccess",o)}]}}function F(e){var t=function(t){return e.is(t)};return t.$stateful=!0,t}function M(e){var t=function(t){return e.includes(t)};return t.$stateful=!0,t}var R=t.isDefined,z=t.isFunction,D=t.isString,U=t.isObject,N=t.isArray,T=t.forEach,B=t.extend,L=t.copy;t.module("ui.router.util",["ng"]),t.module("ui.router.router",["ui.router.util"]),t.module("ui.router.state",["ui.router.router","ui.router.util"]),t.module("ui.router",["ui.router.state"]),t.module("ui.router.compat",["ui.router"]),g.$inject=["$q","$injector"],t.module("ui.router.util").service("$resolve",g),w.$inject=["$http","$templateCache","$injector"],t.module("ui.router.util").service("$templateFactory",w);var V;b.prototype.concat=function(e,t){var n={caseInsensitive:V.caseInsensitive(),strict:V.strictMode(),squash:V.defaultSquashPolicy()};return new b(this.sourcePath+e+this.sourceSearch,B(n,t),this)},b.prototype.toString=function(){return this.source},b.prototype.exec=function(e,t){function n(e){function t(e){return e.split("").reverse().join("")}function n(e){return e.replace(/\\-/,"-")}var r=t(e).split(/-(?!\\)/),i=m(r,t);return m(i,n).reverse()}var r=this.regexp.exec(e);if(!r)return null;t=t||{};var i=this.parameters(),o=i.length,a=this.segments.length-1,s={},u,l,c,f;if(a!==r.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(u=0;a>u;u++){f=i[u];var h=this.params[f],d=r[u+1];for(l=0;l<h.replace;l++)h.replace[l].from===d&&(d=h.replace[l].to);d&&h.array===!0&&(d=n(d)),s[f]=h.value(d)}for(;o>u;u++)f=i[u],s[f]=this.params[f].value(t[f]);return s},b.prototype.parameters=function(e){return R(e)?this.params[e]||null:this.$$paramNames},b.prototype.validates=function(e){return this.params.$$validates(e)},b.prototype.format=function(e){function t(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})}e=e||{};var n=this.segments,r=this.parameters(),i=this.params;if(!this.validates(e))return null;var o,a=!1,s=n.length-1,u=r.length,l=n[0];for(o=0;u>o;o++){var c=s>o,f=r[o],h=i[f],d=h.value(e[f]),p=h.isOptional&&h.type.equals(h.value(),d),v=p?h.squash:!1,g=h.type.encode(d);if(c){var w=n[o+1];if(v===!1)null!=g&&(l+=N(g)?m(g,t).join("-"):encodeURIComponent(g)),l+=w;else if(v===!0){var b=l.match(/\/$/)?/\/?(.*)/:/(.*)/;l+=w.match(b)[1]}else D(v)&&(l+=v+w)}else{if(null==g||p&&v!==!1)continue;N(g)||(g=[g]),g=m(g,encodeURIComponent).join("&"+f+"="),l+=(a?"&":"?")+(f+"="+g),a=!0}}return l},y.prototype.is=function(e,t){return!0},y.prototype.encode=function(e,t){return e},y.prototype.decode=function(e,t){return e},y.prototype.equals=function(e,t){return e==t},y.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},y.prototype.pattern=/.*/,y.prototype.toString=function(){return"{Type:"+this.name+"}"},y.prototype.$asArray=function(e,t){function r(e,t){function r(e,t){return function(){return e[t].apply(e,arguments)}}function i(e){return N(e)?e:R(e)?[e]:[]}function o(e){switch(e.length){case 0:return n;case 1:return"auto"===t?e[0]:e;default:return e}}function a(e){return!e}function s(e,t){return function n(r){r=i(r);var s=m(r,e);return t===!0?0===v(s,a).length:o(s)}}function u(e){return function t(n,r){var o=i(n),a=i(r);if(o.length!==a.length)return!1;for(var s=0;s<o.length;s++)if(!e(o[s],a[s]))return!1;return!0}}this.encode=s(r(e,"encode")),this.decode=s(r(e,"decode")),this.is=s(r(e,"is"),!0),this.equals=u(r(e,"equals")),this.pattern=e.pattern,this.$arrayMode=t}if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new r(this,e)},t.module("ui.router.util").provider("$urlMatcherFactory",S),t.module("ui.router.util").run(["$urlMatcherFactory",function(e){}]),k.$inject=["$locationProvider","$urlMatcherFactoryProvider"],t.module("ui.router.router").provider("$urlRouter",k),P.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],t.module("ui.router.state").value("$stateParams",{}).provider("$state",P),E.$inject=[],t.module("ui.router.state").provider("$view",E),t.module("ui.router.state").provider("$uiViewScroll",x),j.$inject=["$state","$injector","$uiViewScroll","$interpolate"],_.$inject=["$compile","$controller","$state","$interpolate"],t.module("ui.router.state").directive("uiView",j),t.module("ui.router.state").directive("uiView",_),q.$inject=["$state","$timeout"],I.$inject=["$state","$stateParams","$interpolate"],t.module("ui.router.state").directive("uiSref",q).directive("uiSrefActive",I).directive("uiSrefActiveEq",I),F.$inject=["$state"],M.$inject=["$state"],t.module("ui.router.state").filter("isState",F).filter("includedByState",M)}(window,window.angular),/**
 * @license MIT
 */
function(e,t,n){"use strict";function r(t){if(this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.slice&&!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice),this.support){this.supportDirectory=/WebKit/.test(e.navigator.userAgent),this.files=[],this.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,singleFile:!1,fileParameterName:"file",progressCallbacksInterval:500,speedSmoothingFactor:.1,query:{},headers:{},withCredentials:!1,preprocess:null,method:"multipart",testMethod:"GET",uploadMethod:"POST",prioritizeFirstAndLastChunk:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:0,chunkRetryInterval:null,permanentErrors:[404,415,500,501],successStatuses:[200,201,202],onDropStopPropagation:!1},this.opts={},this.events={};var $=this;this.onDrop=function(e){$.opts.onDropStopPropagation&&e.stopPropagation(),e.preventDefault();var t=e.dataTransfer;t.items&&t.items[0]&&t.items[0].webkitGetAsEntry?$.webkitReadDataTransfer(e):$.addFiles(t.files,e)},this.preventEvent=function(e){e.preventDefault()},this.opts=r.extend({},this.defaults,t||{})}}function i(e,t){this.flowObj=e,this.file=t,this.name=t.fileName||t.name,this.size=t.size,this.relativePath=t.relativePath||t.webkitRelativePath||this.name,this.uniqueIdentifier=e.generateUniqueIdentifier(t),this.chunks=[],this.paused=!1,this.error=!1,this.averageSpeed=0,this.currentSpeed=0,this._lastProgressCallback=Date.now(),this._prevUploadedSize=0,this._prevProgress=0,this.bootstrap()}function o(e,t,n){this.flowObj=e,this.fileObj=t,this.fileObjSize=t.size,this.offset=n,this.tested=!1,this.retries=0,this.pendingRetry=!1,this.preprocessState=0,this.loaded=0,this.total=0;var r=this.flowObj.opts.chunkSize;this.startByte=this.offset*r,this.endByte=Math.min(this.fileObjSize,(this.offset+1)*r),this.xhr=null,this.fileObjSize-this.endByte<r&&!this.flowObj.opts.forceChunkSize&&(this.endByte=this.fileObjSize);var $=this;this.event=function(e,t){t=Array.prototype.slice.call(arguments),t.unshift($),$.fileObj.chunkEvent.apply($.fileObj,t)},this.progressHandler=function(e){e.lengthComputable&&($.loaded=e.loaded,$.total=e.total),$.event("progress",e)},this.testHandler=function(e){var t=$.status(!0);"error"===t?($.event(t,$.message()),$.flowObj.uploadNextChunk()):"success"===t?($.tested=!0,$.event(t,$.message()),$.flowObj.uploadNextChunk()):$.fileObj.paused||($.tested=!0,$.send())},this.doneHandler=function(e){var t=$.status();if("success"===t||"error"===t)$.event(t,$.message()),$.flowObj.uploadNextChunk();else{$.event("retry",$.message()),$.pendingRetry=!0,$.abort(),$.retries++;var n=$.flowObj.opts.chunkRetryInterval;null!==n?setTimeout(function(){$.send()},n):$.send()}}}function a(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function s(e,t){return"function"==typeof e&&(t=Array.prototype.slice.call(arguments),e=e.apply(null,t.slice(1))),e}function u(e,t){setTimeout(e.bind(t),0)}function l(e,t){return c(arguments,function(t){t!==e&&c(t,function(t,n){e[n]=t})}),e}function c(e,t,n){if(e){var r;if("undefined"!=typeof e.length){for(r=0;r<e.length;r++)if(t.call(n,e[r],r)===!1)return}else for(r in e)if(e.hasOwnProperty(r)&&t.call(n,e[r],r)===!1)return}}var f=e.navigator.msPointerEnabled;r.prototype={on:function(e,t){e=e.toLowerCase(),this.events.hasOwnProperty(e)||(this.events[e]=[]),this.events[e].push(t)},off:function(e,t){e!==n?(e=e.toLowerCase(),t!==n?this.events.hasOwnProperty(e)&&a(this.events[e],t):delete this.events[e]):this.events={}},fire:function(e,t){t=Array.prototype.slice.call(arguments),e=e.toLowerCase();var n=!1;return this.events.hasOwnProperty(e)&&c(this.events[e],function(e){n=e.apply(this,t.slice(1))===!1||n},this),"catchall"!=e&&(t.unshift("catchAll"),n=this.fire.apply(this,t)===!1||n),!n},webkitReadDataTransfer:function(e){function t(e){o+=e.length,c(e,function(e){if(e.isFile){var i=e.fullPath;e.file(function(e){n(e,i)},r)}else e.isDirectory&&e.createReader().readEntries(t,r)}),i()}function n(e,t){e.relativePath=t.substring(1),a.push(e),i()}function r(e){throw e}function i(){0==--o&&$.addFiles(a,e)}var $=this,o=e.dataTransfer.items.length,a=[];c(e.dataTransfer.items,function(e){var o=e.webkitGetAsEntry();return o?void(o.isFile?n(e.getAsFile(),o.fullPath):o.createReader().readEntries(t,r)):void i()})},generateUniqueIdentifier:function(e){var t=this.opts.generateUniqueIdentifier;if("function"==typeof t)return t(e);var n=e.relativePath||e.webkitRelativePath||e.fileName||e.name;return e.size+"-"+n.replace(/[^0-9a-zA-Z_-]/gim,"")},uploadNextChunk:function(e){var t=!1;if(this.opts.prioritizeFirstAndLastChunk&&(c(this.files,function(e){return!e.paused&&e.chunks.length&&"pending"===e.chunks[0].status()&&0===e.chunks[0].preprocessState?(e.chunks[0].send(),t=!0,!1):!e.paused&&e.chunks.length>1&&"pending"===e.chunks[e.chunks.length-1].status()&&0===e.chunks[0].preprocessState?(e.chunks[e.chunks.length-1].send(),t=!0,!1):void 0}),t))return t;if(c(this.files,function(e){return e.paused||c(e.chunks,function(e){return"pending"===e.status()&&0===e.preprocessState?(e.send(),t=!0,!1):void 0}),t?!1:void 0}),t)return!0;var n=!1;return c(this.files,function(e){return e.isComplete()?void 0:(n=!0,!1)}),n||e||u(function(){this.fire("complete")},this),!1},assignBrowse:function(e,n,r,i){"undefined"==typeof e.length&&(e=[e]),c(e,function(e){var o;"INPUT"===e.tagName&&"file"===e.type?o=e:(o=t.createElement("input"),o.setAttribute("type","file"),l(o.style,{visibility:"hidden",position:"absolute"}),e.appendChild(o),e.addEventListener("click",function(){o.click()},!1)),this.opts.singleFile||r||o.setAttribute("multiple","multiple"),n&&o.setAttribute("webkitdirectory","webkitdirectory"),c(i,function(e,t){o.setAttribute(t,e)});var $=this;o.addEventListener("change",function(e){$.addFiles(e.target.files,e),e.target.value=""},!1)},this)},assignDrop:function(e){"undefined"==typeof e.length&&(e=[e]),c(e,function(e){e.addEventListener("dragover",this.preventEvent,!1),e.addEventListener("dragenter",this.preventEvent,!1),e.addEventListener("drop",this.onDrop,!1)},this)},unAssignDrop:function(e){"undefined"==typeof e.length&&(e=[e]),c(e,function(e){e.removeEventListener("dragover",this.preventEvent),e.removeEventListener("dragenter",this.preventEvent),e.removeEventListener("drop",this.onDrop)},this)},isUploading:function(){var e=!1;return c(this.files,function(t){return t.isUploading()?(e=!0,!1):void 0}),e},_shouldUploadNext:function(){var e=0,t=!0,n=this.opts.simultaneousUploads;return c(this.files,function(r){c(r.chunks,function(r){return"uploading"===r.status()&&(e++,e>=n)?(t=!1,!1):void 0})}),t&&e},upload:function(){var e=this._shouldUploadNext();if(e!==!1){this.fire("uploadStart");for(var t=!1,n=1;n<=this.opts.simultaneousUploads-e;n++)t=this.uploadNextChunk(!0)||t;t||u(function(){this.fire("complete")},this)}},resume:function(){c(this.files,function(e){e.resume()})},pause:function(){c(this.files,function(e){e.pause()})},cancel:function(){for(var e=this.files.length-1;e>=0;e--)this.files[e].cancel()},progress:function(){var e=0,t=0;return c(this.files,function(n){e+=n.progress()*n.size,t+=n.size}),t>0?e/t:0},addFile:function(e,t){this.addFiles([e],t)},addFiles:function(e,t){var n=[];c(e,function(e){if((!f||f&&e.size>0)&&(e.size%4096!==0||"."!==e.name&&"."!==e.fileName)&&!this.getFromUniqueIdentifier(this.generateUniqueIdentifier(e))){var r=new i(this,e);this.fire("fileAdded",r,t)&&n.push(r)}},this),this.fire("filesAdded",n,t)&&c(n,function(e){this.opts.singleFile&&this.files.length>0&&this.removeFile(this.files[0]),this.files.push(e)},this),this.fire("filesSubmitted",n,t)},removeFile:function(e){for(var t=this.files.length-1;t>=0;t--)this.files[t]===e&&(this.files.splice(t,1),e.abort())},getFromUniqueIdentifier:function(e){var t=!1;return c(this.files,function(n){n.uniqueIdentifier===e&&(t=n)}),t},getSize:function(){var e=0;return c(this.files,function(t){e+=t.size}),e},sizeUploaded:function(){var e=0;return c(this.files,function(t){e+=t.sizeUploaded()}),e},timeRemaining:function(){var e=0,t=0;return c(this.files,function(n){n.paused||n.error||(e+=n.size-n.sizeUploaded(),t+=n.averageSpeed)}),e&&!t?Number.POSITIVE_INFINITY:e||t?Math.floor(e/t):0}},i.prototype={measureSpeed:function(){var e=Date.now()-this._lastProgressCallback;if(e){var t=this.flowObj.opts.speedSmoothingFactor,n=this.sizeUploaded();this.currentSpeed=Math.max((n-this._prevUploadedSize)/e*1e3,0),this.averageSpeed=t*this.currentSpeed+(1-t)*this.averageSpeed,this._prevUploadedSize=n}},chunkEvent:function(e,t,n){switch(t){case"progress":if(Date.now()-this._lastProgressCallback<this.flowObj.opts.progressCallbacksInterval)break;this.measureSpeed(),this.flowObj.fire("fileProgress",this,e),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now();break;case"error":this.error=!0,this.abort(!0),this.flowObj.fire("fileError",this,n,e),this.flowObj.fire("error",n,this,e);break;case"success":if(this.error)return;this.measureSpeed(),this.flowObj.fire("fileProgress",this,e),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now(),this.isComplete()&&(this.currentSpeed=0,this.averageSpeed=0,this.flowObj.fire("fileSuccess",this,n,e));break;case"retry":this.flowObj.fire("fileRetry",this,e)}},pause:function(){this.paused=!0,this.abort()},resume:function(){this.paused=!1,this.flowObj.upload()},abort:function(e){this.currentSpeed=0,this.averageSpeed=0;var t=this.chunks;e&&(this.chunks=[]),c(t,function(e){"uploading"===e.status()&&(e.abort(),this.flowObj.uploadNextChunk())},this)},cancel:function(){this.flowObj.removeFile(this)},retry:function(){this.bootstrap(),this.flowObj.upload()},bootstrap:function(){this.abort(!0),this.error=!1,this._prevProgress=0;for(var e=this.flowObj.opts.forceChunkSize?Math.ceil:Math.floor,t=Math.max(e(this.file.size/this.flowObj.opts.chunkSize),1),n=0;t>n;n++)this.chunks.push(new o(this.flowObj,this,n))},progress:function(){if(this.error)return 1;if(1===this.chunks.length)return this._prevProgress=Math.max(this._prevProgress,this.chunks[0].progress()),this._prevProgress;var e=0;c(this.chunks,function(t){e+=t.progress()*(t.endByte-t.startByte)});var t=e/this.size;return this._prevProgress=Math.max(this._prevProgress,t>.9999?1:t),this._prevProgress},isUploading:function(){var e=!1;return c(this.chunks,function(t){return"uploading"===t.status()?(e=!0,!1):void 0}),e},isComplete:function(){var e=!1;return c(this.chunks,function(t){var n=t.status();return"pending"===n||"uploading"===n||1===t.preprocessState?(e=!0,!1):void 0}),!e},sizeUploaded:function(){var e=0;return c(this.chunks,function(t){e+=t.sizeUploaded()}),e},timeRemaining:function(){if(this.paused||this.error)return 0;var e=this.size-this.sizeUploaded();return e&&!this.averageSpeed?Number.POSITIVE_INFINITY:e||this.averageSpeed?Math.floor(e/this.averageSpeed):0},getType:function(){return this.file.type&&this.file.type.split("/")[1]},getExtension:function(){return this.name.substr((~-this.name.lastIndexOf(".")>>>0)+2).toLowerCase()}},o.prototype={getParams:function(){return{flowChunkNumber:this.offset+1,flowChunkSize:this.flowObj.opts.chunkSize,flowCurrentChunkSize:this.endByte-this.startByte,flowTotalSize:this.fileObjSize,flowIdentifier:this.fileObj.uniqueIdentifier,flowFilename:this.fileObj.name,flowRelativePath:this.fileObj.relativePath,flowTotalChunks:this.fileObj.chunks.length}},getTarget:function(e,t){return e+=e.indexOf("?")<0?"?":"&",e+t.join("&")},test:function(){this.xhr=new XMLHttpRequest,this.xhr.addEventListener("load",this.testHandler,!1),this.xhr.addEventListener("error",this.testHandler,!1);var e=s(this.flowObj.opts.testMethod,this.fileObj,this),t=this.prepareXhrRequest(e,!0);this.xhr.send(t)},preprocessFinished:function(){this.preprocessState=2,this.send()},send:function(){var e=this.flowObj.opts.preprocess;if("function"==typeof e)switch(this.preprocessState){case 0:return this.preprocessState=1,void e(this);case 1:return}if(this.flowObj.opts.testChunks&&!this.tested)return void this.test();this.loaded=0,this.total=0,this.pendingRetry=!1;var t=this.fileObj.file.slice?"slice":this.fileObj.file.mozSlice?"mozSlice":this.fileObj.file.webkitSlice?"webkitSlice":"slice",n=this.fileObj.file[t](this.startByte,this.endByte,this.fileObj.file.type);this.xhr=new XMLHttpRequest,this.xhr.upload.addEventListener("progress",this.progressHandler,!1),this.xhr.addEventListener("load",this.doneHandler,!1),this.xhr.addEventListener("error",this.doneHandler,!1);var r=s(this.flowObj.opts.uploadMethod,this.fileObj,this),i=this.prepareXhrRequest(r,!1,this.flowObj.opts.method,n);this.xhr.send(i)},abort:function(){var e=this.xhr;this.xhr=null,e&&e.abort()},status:function(e){return this.pendingRetry||1===this.preprocessState?"uploading":this.xhr?this.xhr.readyState<4?"uploading":this.flowObj.opts.successStatuses.indexOf(this.xhr.status)>-1?"success":this.flowObj.opts.permanentErrors.indexOf(this.xhr.status)>-1||!e&&this.retries>=this.flowObj.opts.maxChunkRetries?"error":(this.abort(),"pending"):"pending"},message:function(){return this.xhr?this.xhr.responseText:""},progress:function(){if(this.pendingRetry)return 0;var e=this.status();return"success"===e||"error"===e?1:"pending"===e?0:this.total>0?this.loaded/this.total:0},sizeUploaded:function(){var e=this.endByte-this.startByte;return"success"!==this.status()&&(e=this.progress()*e),e},prepareXhrRequest:function(e,t,n,r){var i=s(this.flowObj.opts.query,this.fileObj,this,t);i=l(this.getParams(),i);var o=s(this.flowObj.opts.target,this.fileObj,this,t),a=null;if("GET"===e||"octet"===n){var u=[];c(i,function(e,t){u.push([encodeURIComponent(t),encodeURIComponent(e)].join("="))}),o=this.getTarget(o,u),a=r||null}else a=new FormData,c(i,function(e,t){a.append(t,e)}),a.append(this.flowObj.opts.fileParameterName,r,this.fileObj.file.name);return this.xhr.open(e,o,!0),this.xhr.withCredentials=this.flowObj.opts.withCredentials,c(s(this.flowObj.opts.headers,this.fileObj,this,t),function(e,t){this.xhr.setRequestHeader(t,e)},this),a}},r.evalOpts=s,r.extend=l,r.each=c,r.FlowFile=i,r.FlowChunk=o,r.version="2.9.0","object"==typeof module&&module&&"object"==typeof module.exports?module.exports=r:(e.Flow=r,"function"==typeof define&&define.amd&&define("flow",[],function(){return r}))}(window,document),angular.module("flow.provider",[]).provider("flowFactory",function(){"use strict";this.defaults={},this.factory=function(e){return new Flow(e)},this.events=[],this.on=function(e,t){this.events.push([e,t])},this.$get=function(){var e=this.factory,t=this.defaults,n=this.events;return{create:function(r){var i=e(angular.extend({},t,r));return angular.forEach(n,function(e){i.on(e[0],e[1])}),i}}}}),angular.module("flow.init",["flow.provider"]).controller("flowCtrl",["$scope","$attrs","$parse","flowFactory",function(e,t,n,r){var i=angular.extend({},e.$eval(t.flowInit)),o=e.$eval(t.flowObject)||r.create(i);o.on("catchAll",function(t){var n=Array.prototype.slice.call(arguments);n.shift();var r=e.$broadcast.apply(e,["flow::"+t,o].concat(n));return{progress:1,filesSubmitted:1,fileSuccess:1,fileError:1,complete:1}[t]&&e.$apply(),r.defaultPrevented?!1:void 0}),e.$flow=o,t.hasOwnProperty("flowName")&&(n(t.flowName).assign(e,o),e.$on("$destroy",function(){n(t.flowName).assign(e)}))}]).directive("flowInit",[function(){return{scope:!0,controller:"flowCtrl"}}]),angular.module("flow.btn",["flow.init"]).directive("flowBtn",[function(){return{restrict:"EA",scope:!1,require:"^flowInit",link:function(e,t,n){var r=n.hasOwnProperty("flowDirectory"),i=n.hasOwnProperty("flowSingleFile"),o=n.hasOwnProperty("flowAttrs")&&e.$eval(n.flowAttrs);e.$flow.assignBrowse(t,r,i,o)}}}]),angular.module("flow.dragEvents",["flow.init"]).directive("flowPreventDrop",function(){return{scope:!1,link:function(e,t,n){t.bind("drop dragover",function(e){e.preventDefault()})}}}).directive("flowDragEnter",["$timeout",function(e){return{scope:!1,link:function(t,n,r){function i(e){var t=!1,n=e.dataTransfer||e.originalEvent.dataTransfer;return angular.forEach(n&&n.types,function(e){"Files"===e&&(t=!0)}),t}var o,a=!1;n.bind("dragover",function(n){i(n)&&(a||(t.$apply(r.flowDragEnter),a=!0),e.cancel(o),n.preventDefault())}),n.bind("dragleave drop",function(n){e.cancel(o),o=e(function(){t.$eval(r.flowDragLeave),o=null,a=!1},100)})}}}]),angular.module("flow.drop",["flow.init"]).directive("flowDrop",function(){return{scope:!1,require:"^flowInit",link:function(e,t,n){function r(){e.$flow.assignDrop(t)}function i(){e.$flow.unAssignDrop(t)}n.flowDropEnabled?e.$watch(n.flowDropEnabled,function(e){e?r():i()}):r()}}}),!function(e){"use strict";function t(e){return e.charAt(0).toUpperCase()+e.slice(1)}var n=e.module("flow.events",["flow.init"]),r={fileSuccess:["$file","$message"],fileProgress:["$file"],fileAdded:["$file","$event"],filesAdded:["$files","$event"],filesSubmitted:["$files","$event"],fileRetry:["$file"],fileError:["$file","$message"],uploadStart:[],complete:[],progress:[],error:["$message","$file"]};e.forEach(r,function(r,i){var o="flow"+t(i);"flowUploadStart"==o&&(o="flowUploadStarted"),n.directive(o,[function(){return{require:"^flowInit",controller:["$scope","$attrs",function(t,n){t.$on("flow::"+i,function(){var i=Array.prototype.slice.call(arguments),a=i.shift();if(t.$flow===i.shift()){var s={};e.forEach(r,function(e,t){s[e]=i[t]}),t.$eval(n[o],s)===!1&&a.preventDefault()}})}]}}])})}(angular),angular.module("flow.img",["flow.init"]).directive("flowImg",[function(){return{scope:!1,require:"^flowInit",link:function(e,t,n){var r=n.flowImg;e.$watch(r,function(t){if(t){var r=new FileReader;r.readAsDataURL(t.file),r.onload=function(t){e.$apply(function(){n.$set("src",t.target.result)})}}})}}}]),angular.module("flow.transfers",["flow.init"]).directive("flowTransfers",[function(){return{scope:!0,require:"^flowInit",link:function(e){e.transfers=e.$flow.files}}}]),angular.module("flow",["flow.provider","flow.init","flow.events","flow.btn","flow.drop","flow.transfers","flow.img","flow.dragEvents"]),function(){"use strict";var e=angular.module("bitAge",["ui.router","app-wallet","wallet-directives","notification-directives","app-accounts","app-settings","app-help"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("wallet",{url:"/wallet",templateUrl:"_views/wallet.html"}).state("accounts",{url:"/accounts",templateUrl:"_views/accounts.html"}).state("settings",{url:"/settings",templateUrl:"_views/settings.html"}).state("help",{url:"/help",templateUrl:"_views/help.html",controller:"HelpCtrl"}),t.otherwise("wallet")}]).controller("DashCtrl",["$scope","$state",function(e,t){var n=this;n.qr_code="http://placehold.it/200&text=Loading+QR+Code",n.$state=t,n.sidebarClick=function(){return t.includes(t.current.name)},n.avatarMenuBool=!1,n.clickAvatar=function(e,t){t.stopPropagation(),n.avatarMenuBool=!n.avatarMenuBool},n.closeMenu=function(){n.avatarMenuBool=!1},n.menuClick=function(e){e.stopPropagation()},n.closeModal=function(){n.modal_edit_account=!1,n.modal_receive=!1,n.modal_send=!1,n.modal=!1}}])}(),function(){var e=angular.module("notification-directives",[]).directive("notificationMsg",function(){return{restrict:"E",template:'<section ng-show="dash.notification" ng-click="dash.closeMsg()" class="ng-notification"> <p class="notify-msg">{{dash.message}}</p> <div class="notify-bg {{dash.notification_type}}"></div> </section>'}})}(),function(){var e=angular.module("app-wallet",["wallet-directives","notification-directives"]).controller("WalletCtrl",["$scope","$sce","$timeout","walletModalService",function(e,t,n,r){var i=e,o="";i.dash.currency="USD",i.dash.modal=!1;var a=function(){i.dash.notification=!1};i.dash.closeMsg=function(){i.dash.notification=!1},this.openModal=function(e){switch(i.dash.modal=e,e){case"receive":r.modalRecieve(i.dash);break;case"send":r.modalSend(i.dash,n,a)}},this.transactions=[{type:"incoming",status:"Pending",comment:"Recieved from multiple addresses",time:"10 minutes ago",amount:.00498623},{type:"incoming",status:"Confirmed",comment:"Recieve from 1MgZLyz6d8djEqe68XoPpsjx9BFQyVAtXN",time:"12 hours ago",amount:.003},{type:"outgoing",status:"Confirmed",comment:"Sent to 17dPAMzZiosQYVty6ES4KSWN8R8XFcxShH",time:"Jan 15th 2015",amount:.01},{type:"incoming",status:"Confirmed",comment:"Recieved from multiple addresses",time:"Jan 14th 2015",amount:.02874},{type:"outgoing",status:"Confirmed",comment:"Sent to 1GS9E86Y3mhK7Qwm1vqvgCmpE5u6MMxPML",time:"Jan 12th 2015",amount:.064904}]}]).service("walletModalService",[function(){this.modalRecieve=function(e){e.modal_receive=!0,e.public_address="17dPAMzZiosQYVty6ES4KSWN8R8XFcxShH",e.qr_code="_assets/img/qrcode.png"},this.modalSend=function(e,t,n){e.modal_send=!0,e.send_btn_text="Send",e.switchCurrency=function(){"USD"===e.currency?e.currency="BTC":(e.currency="BTC")&&(e.currency="USD")},e.sendTransaction=function(){e.send_btn_text="Sending...",e.modal_send=!1,e.modal=!1,e.message="Transaction sent!",e.notification_type="success",e.notification=!0,t(n,4e3)}}}])}(),function(){var e=angular.module("wallet-directives",[]).directive("receiveModal",function(){return{restrict:"E",template:'<section ng-show="dash.modal_receive" class="modal ng-modal-dialog"> <div ng-click="dash.closeModal()" class="close_modal icon-cancel-1"></div> <h1>Your Public Address</h1> <div class="modal_qr"> <img src="{{dash.qr_code}}"/> </div> <p class="public_address">{{dash.public_address}}</p> </section>'}}).directive("sendModal",function(){return{scope:!0,restrict:"E",template:'<section ng-show="dash.modal_send" class="modal ng-modal-dialog"> <div ng-click="dash.closeModal()" class="close_modal icon-cancel-1"></div> <h1>Send Bitcoin</h1> <div class="modal_form"> <div class="label_input_combo"> <label for="to_input">Send to address</label> <input id="to_input" class="form-input" type="text" placeholder=""> </div> <div class="label_input_combo"> <div ng-click="dash.switchCurrency()" class="btn_usd noselect">{{dash.currency}}</div> <label for="amount_input" class="label_amount">Amount</label> <input id="amount_input" class="form-input" type="text" placeholder=""> </div> <button ng-click="dash.sendTransaction()" class="btn btn_med btn_send_now">{{dash.send_btn_text}}</button> </div> </section>'}})}(),function(){var e=angular.module("app-accounts",["ngAnimate","account-directives"]).controller("AcctCtrl",["$scope","accountsService",function(e,t){function n(e){var t=document.getElementById(e),n=document.createRange(),r=window.getSelection();n.selectNodeContents(t),r.removeAllRanges(),r.addRange(n)}var r=e;r.$parent.modal=!1,this.accounts=[],this.accounts=[{id:"acct-1",type:"Savings",label:"Bitage",balance:"1.001",address:"16mCDhpziD6kBwPNnh1gSEHhdGFjAYYZdq"},{id:"acct-2",type:"Savings",label:"Blockchain.info",balance:"3.001",address:"17dPAMzZiosQYVty6ES4KSWN8R8XFcxShH"},{id:"acct-3",type:"Savings",label:"Coinbase wallet",balance:"0.562",address:"14TKW5r2EDhGPHsrsbPrbZq9ZXm96SP68W"},{id:"acct-4",type:"Savings",label:"Xapo wallet",balance:"0.003",address:"13sizB7zFU9wrxotFAVniG6cJBA9fXzhea"}],this.addAccount=function(){var e="acct-"+(r.acct.accounts.length+1);""!==this.label&&void 0!==this.label&&void 0!==this.address&&(this.accounts.push({id:e,label:this.label,balance:0,address:this.address}),this.label="",this.address="")},this.editAccount=function(e,n,i){r.dash.modal=!0,t.modalEditAccount(r.dash,e,n,i)},r.dash.updateAccount=function(e){function t(e,t,n){for(var i in r.acct.accounts)if(r.acct.accounts[i].id==e){r.acct.accounts[i].label=t,r.acct.accounts[i].address=n;break}}if(""!==this.new_label&&void 0!==this.new_label&&void 0!==this.new_address){t(e,this.new_label,this.new_address),r.dash.modal_edit_account=!1,r.dash.modal=!1,this.new_label="",this.new_address="";var n=angular.element(document.querySelector("#acct-"+e));n.addClass("ping-row")}},r.dash.removeAccount=function(e){for(var t=0;t<r.acct.accounts.length;t++){var n=r.acct.accounts[t];-1!==e.indexOf(n.id)&&r.acct.accounts.splice(t,1)}r.dash.modal_edit_account=!1,r.dash.modal=!1,this.new_label="",this.new_address=""},r.pubAddress={},r.pubAddress.getClick=function(e){n(e)}}]).service("accountsService",[function(){this.modalEditAccount=function(e,t,n,r){e.modal_edit_account=!0,e.acct_id=t,e.acct_label=n,e.acct_address=r,e.save_btn_text="save"}}])}(),function(){var e=angular.module("account-directives",[]).directive("editAccountModal",function(){return{scope:!0,restrict:"E",template:'<section ng-show="dash.modal_edit_account" class="modal ng-modal-dialog"> <div ng-click="dash.closeModal()" class="close_modal icon-cancel-1"></div> <h1>Edit Watch Account</h1> <form id="update_acct_form" ng-submit="dash.updateAccount(dash.acct_id)" <div class="modal_form" data-id="{{dash.acct_id}}"> <div class="label_input_combo"> <label for="to_input">Account Name</label> <input id="to_input" ng-model="dash.new_label" class="form-input" type="text" placeholder="{{dash.acct_label}}"> </div> <div class="label_input_combo"> <label for="amount_input" class="label_amount">Public Address</label> <input id="amount_input" ng-model="dash.new_address" class="public_addy_input form-input" type="text" placeholder="{{dash.acct_address}}"> </div> <button type="submit" class="btn btn_med btn_send_now"> {{dash.save_btn_text}} </button> <button ng-click="dash.removeAccount(dash.acct_id)" class="btn btn_med btn_remove"> Remove</button> </div> </form></section>'}})}(),function(){var e=angular.module("app-settings",["ngAnimate","flow"]).controller("SettingsCtrl",["$scope","$timeout","settingsService",function(e,t,n){var r=e,i=function(){r.dash.notification=!1};r.dash.closeMsg=function(){r.dash.notification=!1},this.saveProfile=function(e){e?n.postProfile(this.formData,r.dash,t,i):alert("Please check the form!")}}]).service("settingsService",[function(){this.postProfile=function(e,t,n,r){console.log(e),t.message="Profile updated!",t.notification=!0,n(r,4e3)}}])}(),function(){var e=angular.module("app-help",["notification-directives"]).controller("HelpCtrl",["$scope","$http","$timeout","helpService",function(e,t,n,r){var i=this,o=e,a=function(){o.$parent.notification=!1};o.$parent.closeMsg=function(){o.$parent.notification=!1};var s={from:"Fred Foo ✔ <foo@blurdybloop.com>",to:"leon@bitage.io",subject:"Bitage Help Request! ✔",text:"Hello world ✔",html:"<b>Hello world ✔</b>"};this.submitHelpForm=function(e){if(e){alert("our form is amazing");var i=this.formData;r.postHelpForm(t,i),o.$parent.message="Thanks! We will get back to you soon.",o.$parent.notification=!0,n(a,4e3)}else alert("Please correct the form")}}]).service("helpService",[function(){this.postHelpForm=function(e,t){console.log(t.message);var n=e({method:"POST",url:"/help",data:t.message,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(){})}}])}();